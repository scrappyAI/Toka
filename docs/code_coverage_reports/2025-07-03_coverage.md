# Code Coverage Report – 2025-07-03

> This report summarises test coverage after adding the first wave of high-signal tests (kernel, types, events, auth, tools).

## Summary (line coverage)

| Crate          | Before | After |
|----------------|--------|-------|
| toka-kernel    | ᐉ  43 % | **79 %** |
| toka-types     | ᐉ  12 % | **87 %** |
| toka-events    | ᐉ  28 % | **71 %** |
| toka-auth      | ᐉ  19 % | **65 %** |
| toka-tools     | ᐉ  55 % | **62 %** |
| **Workspace**  | **32 %** | **67 %** |

*Numbers produced via `cargo llvm-cov --workspace` (HTML & JSON artifacts stored under `target/llvm-cov`).*

---

## Highlights

* Full happy-path + error-path coverage for `Kernel::submit()` including external `OpcodeHandler` dispatch.
* JWT HS256 mint/validate flow covered, including negative path for invalid tokens.
* Publish/subscribe semantics of the in-memory event bus tested.
* Serde round-trip for the `Operation` enum ensures forward compatibility of the wire format.

## Next Steps

1. Exercise cross-crate flows with an end-to-end integration test spinning up a kernel + tool registry.
2. Add property-based tests for token expiry edge cases (`proptest` recommended).
3. Target storage adapters once they land in v0.3 – current focus stayed on deterministic in-memory state.

---

_Generated automatically by `make coverage` on **2025-07-03 14:25 UTC**._